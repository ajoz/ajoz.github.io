{% assign listItems = '' %}
{% assign foundPosts = 0 %}

{% for post in site.related_posts limit:3 %}
    {% capture tagmarkup %}<li><span>{{ post.date | date_to_string }} &raquo;</span> <a href="{{ post.url }}">{{ post.title }}</a></li>{% endcapture %}
    {% assign listItems = listItems | append: tagmarkup %}
    {% assign foundPosts = foundPosts | plus: 1 %}
{% endfor %}

{% if foundPosts > 0 %}
    <div id="latest">
        <h3>Latest Posts:</h3>

        <ul class="posts">
            {{ listItems }}
        </ul>
    </div>
{% endif %}